{"ast":null,"code":"import axios from 'axios';\nimport { getAuth } from 'firebase/auth';\nconst API_BASE_URL = 'http://localhost:8000';\n\n// Create axios instance with default config\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL\n});\n\n// Add request interceptor to add token to requests\naxiosInstance.interceptors.request.use(async config => {\n  var _auth$currentUser;\n  const auth = getAuth();\n  const idToken = await ((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.getIdToken());\n  if (idToken) {\n    config.headers['Authorization'] = `Bearer ${idToken}`;\n  }\n  return config;\n}, error => Promise.reject(error));\nexport const api = {\n  // Auth endpoints\n  register: async userData => {\n    const response = await axiosInstance.post('/auth/register', userData);\n    return response.data;\n  },\n  login: async (username, password) => {\n    try {\n      var _auth$currentUser2;\n      // Get custom token from backend\n      const formData = new FormData();\n      formData.append('username', username);\n      formData.append('password', password);\n      const response = await axiosInstance.post('/auth/login', formData);\n      const customToken = response.data.access_token;\n\n      // Sign in with custom token\n      const auth = getAuth();\n      await auth.signInWithCustomToken(customToken);\n\n      // Get ID token\n      const idToken = await ((_auth$currentUser2 = auth.currentUser) === null || _auth$currentUser2 === void 0 ? void 0 : _auth$currentUser2.getIdToken());\n\n      // Store ID token\n      localStorage.setItem('access_token', idToken || '');\n      return {\n        access_token: idToken || ''\n      };\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  },\n  // Vocabulary endpoints\n  getVocabulary: async () => {\n    const response = await axiosInstance.get('/vocabulary/');\n    return response.data;\n  },\n  addVocabulary: async vocab => {\n    const response = await axiosInstance.post('/vocabulary/', vocab);\n    return response.data;\n  },\n  deleteVocabulary: async vocabId => {\n    await axiosInstance.delete(`/vocabulary/${vocabId}`);\n  },\n  // Quiz endpoints\n  generateQuiz: async (numQuestions = 15) => {\n    const response = await axiosInstance.get('/quiz/generate/', {\n      params: {\n        num_questions: numQuestions\n      }\n    });\n    return response.data;\n  }\n};","map":{"version":3,"names":["axios","getAuth","API_BASE_URL","axiosInstance","create","baseURL","interceptors","request","use","config","_auth$currentUser","auth","idToken","currentUser","getIdToken","headers","error","Promise","reject","api","register","userData","response","post","data","login","username","password","_auth$currentUser2","formData","FormData","append","customToken","access_token","signInWithCustomToken","localStorage","setItem","console","getVocabulary","get","addVocabulary","vocab","deleteVocabulary","vocabId","delete","generateQuiz","numQuestions","params","num_questions"],"sources":["/Users/duongthanhduy/TOEIC_FE/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { getAuth } from 'firebase/auth';\n\nconst API_BASE_URL = 'http://localhost:8000';\n\n// Create axios instance with default config\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n});\n\n// Add request interceptor to add token to requests\naxiosInstance.interceptors.request.use(\n  async (config) => {\n    const auth = getAuth();\n    const idToken = await auth.currentUser?.getIdToken();\n    if (idToken) {\n      config.headers['Authorization'] = `Bearer ${idToken}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nexport interface Vocabulary {\n  id: number;\n  word: string;\n  meaning: string;\n  example?: string;\n  user_id: number;\n}\n\nexport interface VocabIn {\n  word: string;\n  meaning: string;\n  example?: string;\n}\n\nexport interface QuizQuestion {\n  word: string;\n  correctAnswer: string;\n  options: string[];\n}\n\nexport interface UserAuth {\n  username: string;\n  password: string;\n}\n\nexport interface UserCreate extends UserAuth {\n  email: string;\n  full_name?: string;\n}\n\nexport interface TokenResponse {\n  access_token: string;\n}\n\nexport const api = {\n  // Auth endpoints\n  register: async (userData: UserCreate): Promise<TokenResponse> => {\n    const response = await axiosInstance.post('/auth/register', userData);\n    return response.data;\n  },\n\n  login: async (username: string, password: string): Promise<TokenResponse> => {\n    try {\n      // Get custom token from backend\n      const formData = new FormData();\n      formData.append('username', username);\n      formData.append('password', password);\n      \n      const response = await axiosInstance.post('/auth/login', formData);\n      const customToken = response.data.access_token;\n\n      // Sign in with custom token\n      const auth = getAuth();\n      await auth.signInWithCustomToken(customToken);\n      \n      // Get ID token\n      const idToken = await auth.currentUser?.getIdToken();\n      \n      // Store ID token\n      localStorage.setItem('access_token', idToken || '');\n      \n      return { access_token: idToken || '' };\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  },\n\n  // Vocabulary endpoints\n  getVocabulary: async (): Promise<Vocabulary[]> => {\n    const response = await axiosInstance.get('/vocabulary/');\n    return response.data;\n  },\n\n  addVocabulary: async (vocab: VocabIn): Promise<Vocabulary> => {\n    const response = await axiosInstance.post('/vocabulary/', vocab);\n    return response.data;\n  },\n\n  deleteVocabulary: async (vocabId: number): Promise<void> => {\n    await axiosInstance.delete(`/vocabulary/${vocabId}`);\n  },\n\n  // Quiz endpoints\n  generateQuiz: async (numQuestions: number = 15): Promise<QuizQuestion[]> => {\n    const response = await axiosInstance.get('/quiz/generate/', {\n      params: { num_questions: numQuestions },\n    });\n    return response.data;\n  },\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAEvC,MAAMC,YAAY,GAAG,uBAAuB;;AAE5C;AACA,MAAMC,aAAa,GAAGH,KAAK,CAACI,MAAM,CAAC;EACjCC,OAAO,EAAEH;AACX,CAAC,CAAC;;AAEF;AACAC,aAAa,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CACpC,MAAOC,MAAM,IAAK;EAAA,IAAAC,iBAAA;EAChB,MAAMC,IAAI,GAAGV,OAAO,CAAC,CAAC;EACtB,MAAMW,OAAO,GAAG,QAAAF,iBAAA,GAAMC,IAAI,CAACE,WAAW,cAAAH,iBAAA,uBAAhBA,iBAAA,CAAkBI,UAAU,CAAC,CAAC;EACpD,IAAIF,OAAO,EAAE;IACXH,MAAM,CAACM,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,OAAO,EAAE;EACvD;EACA,OAAOH,MAAM;AACf,CAAC,EACAO,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;AAoCD,OAAO,MAAMG,GAAG,GAAG;EACjB;EACAC,QAAQ,EAAE,MAAOC,QAAoB,IAA6B;IAChE,MAAMC,QAAQ,GAAG,MAAMnB,aAAa,CAACoB,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;IACrE,OAAOC,QAAQ,CAACE,IAAI;EACtB,CAAC;EAEDC,KAAK,EAAE,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAA6B;IAC3E,IAAI;MAAA,IAAAC,kBAAA;MACF;MACA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEL,QAAQ,CAAC;MACrCG,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEJ,QAAQ,CAAC;MAErC,MAAML,QAAQ,GAAG,MAAMnB,aAAa,CAACoB,IAAI,CAAC,aAAa,EAAEM,QAAQ,CAAC;MAClE,MAAMG,WAAW,GAAGV,QAAQ,CAACE,IAAI,CAACS,YAAY;;MAE9C;MACA,MAAMtB,IAAI,GAAGV,OAAO,CAAC,CAAC;MACtB,MAAMU,IAAI,CAACuB,qBAAqB,CAACF,WAAW,CAAC;;MAE7C;MACA,MAAMpB,OAAO,GAAG,QAAAgB,kBAAA,GAAMjB,IAAI,CAACE,WAAW,cAAAe,kBAAA,uBAAhBA,kBAAA,CAAkBd,UAAU,CAAC,CAAC;;MAEpD;MACAqB,YAAY,CAACC,OAAO,CAAC,cAAc,EAAExB,OAAO,IAAI,EAAE,CAAC;MAEnD,OAAO;QAAEqB,YAAY,EAAErB,OAAO,IAAI;MAAG,CAAC;IACxC,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdqB,OAAO,CAACrB,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,MAAMA,KAAK;IACb;EACF,CAAC;EAED;EACAsB,aAAa,EAAE,MAAAA,CAAA,KAAmC;IAChD,MAAMhB,QAAQ,GAAG,MAAMnB,aAAa,CAACoC,GAAG,CAAC,cAAc,CAAC;IACxD,OAAOjB,QAAQ,CAACE,IAAI;EACtB,CAAC;EAEDgB,aAAa,EAAE,MAAOC,KAAc,IAA0B;IAC5D,MAAMnB,QAAQ,GAAG,MAAMnB,aAAa,CAACoB,IAAI,CAAC,cAAc,EAAEkB,KAAK,CAAC;IAChE,OAAOnB,QAAQ,CAACE,IAAI;EACtB,CAAC;EAEDkB,gBAAgB,EAAE,MAAOC,OAAe,IAAoB;IAC1D,MAAMxC,aAAa,CAACyC,MAAM,CAAC,eAAeD,OAAO,EAAE,CAAC;EACtD,CAAC;EAED;EACAE,YAAY,EAAE,MAAAA,CAAOC,YAAoB,GAAG,EAAE,KAA8B;IAC1E,MAAMxB,QAAQ,GAAG,MAAMnB,aAAa,CAACoC,GAAG,CAAC,iBAAiB,EAAE;MAC1DQ,MAAM,EAAE;QAAEC,aAAa,EAAEF;MAAa;IACxC,CAAC,CAAC;IACF,OAAOxB,QAAQ,CAACE,IAAI;EACtB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}